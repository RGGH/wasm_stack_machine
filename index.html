<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WASM Stack Machine Demo</title>
    <!-- Bootstrap CSS CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f8f9fa; /* Light grey background */
        }
        button {
            background-color: #28a745; /* Green button */
            color: white;
        }
        button:hover {
            background-color: #218838; /* Darker green on hover */
        }
        h1 {
            color: #343a40; /* Darker grey for the heading */
        }
        #stack-top {
            font-weight: bold; /* Make the stack top display bold */
        }
    </style>
</head>
<body class="container text-center">
    <h1 class="my-4">WASM Stack Machine Demo</h1>
    <div class="btn-group" role="group" aria-label="Basic example">
        <button id="add" class="btn">Add</button>
        <button id="sub" class="btn">Subtract</button>
        <button id="push5" class="btn">Push 5</button>
        <button id="push3" class="btn">Push 3</button>
        <button id="pop" class="btn">Pop</button>
    </div>
    <p class="mt-4">Stack Top: <span id="stack-top">None</span></p>

    <script type="module">
        import init, { StackMachine } from "./pkg/wasm_stack_machine.js";

        async function run() {
            await init(); // Load and initialize the WebAssembly module

            // Create a new instance of the StackMachine
            const machine = new StackMachine();

            // Utility function to update the stack top display
            function updateStackTop() {
                const topValue = machine.peek();
                document.getElementById("stack-top").textContent = topValue !== undefined ? topValue : "None";
            }

            // Set up button event listeners
            document.getElementById("add").addEventListener("click", () => {
                machine.add();
                updateStackTop();
            });

            document.getElementById("sub").addEventListener("click", () => {
                machine.sub();
                updateStackTop();
            });

            document.getElementById("push5").addEventListener("click", () => {
                machine.push(5);
                updateStackTop();
            });

            document.getElementById("push3").addEventListener("click", () => {
                machine.push(3);
                updateStackTop();
            });

            document.getElementById("pop").addEventListener("click", () => {
                machine.pop();
                updateStackTop();
            });

            // Initialize display
            updateStackTop();
        }

        run();
    </script>
</body>
</html>


